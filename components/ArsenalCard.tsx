'use client'

import { useEffect, useRef } from 'react'
import gsap from 'gsap'
import GlassCard from './GlassCard'

const TOOLS = [
    { name: 'Linux', icon: LinuxIcon },
    { name: 'Python', icon: PythonIcon },
    { name: 'Bash', icon: BashIcon },
    { name: 'AWS', icon: AWSIcon },
    { name: 'Git', icon: GitIcon },
    { name: 'Burp Suite', icon: BurpIcon },
    { name: 'Wireshark', icon: WiresharkIcon },
    { name: 'Metasploit', icon: MetasploitIcon },
]

export default function ArsenalCard() {
    const trackRef = useRef<HTMLDivElement>(null)

    useEffect(() => {
        if (!trackRef.current) return

        const track = trackRef.current
        const totalWidth = track.scrollWidth / 2

        gsap.to(track, {
            x: -totalWidth,
            duration: 25,
            ease: 'none',
            repeat: -1,
        })
    }, [])

    return (
        <GlassCard className="col-span-1 row-span-1 overflow-hidden">
            {/* Header */}
            <div className="flex items-center gap-2 mb-5">
                <div className="w-2 h-2 rounded-full bg-cyber-green" />
                <span className="text-xs font-mono tracking-wider uppercase text-white/50">
                    THE ARSENAL
                </span>
            </div>

            {/* Marquee */}
            <div className="relative overflow-hidden">
                {/* Fade edges */}
                <div className="absolute left-0 top-0 bottom-0 w-8 bg-gradient-to-r from-[rgba(10,10,10,0.8)] to-transparent z-10" />
                <div className="absolute right-0 top-0 bottom-0 w-8 bg-gradient-to-l from-[rgba(10,10,10,0.8)] to-transparent z-10" />

                <div ref={trackRef} className="marquee-track">
                    {/* Duplicate for seamless loop */}
                    {[...TOOLS, ...TOOLS].map((tool, i) => (
                        <div key={i} className="flex flex-col items-center gap-2 min-w-[64px]">
                            <div className="w-10 h-10 md:w-12 md:h-12 flex items-center justify-center text-white/60 hover:text-cyber-green transition-colors">
                                <tool.icon />
                            </div>
                            <span className="text-[9px] font-mono text-white/30 whitespace-nowrap">
                                {tool.name}
                            </span>
                        </div>
                    ))}
                </div>
            </div>
        </GlassCard>
    )
}

/* ═══════════════════════════════════════
   SVG Icons
   ═══════════════════════════════════════ */

function LinuxIcon() {
    return (
        <svg viewBox="0 0 24 24" className="w-8 h-8" fill="currentColor">
            <path d="M12.504 0c-.155 0-.311.01-.465.035-.615.1-1.156.395-1.604.796-.45.4-.81.945-1.08 1.57-.27.625-.436 1.318-.506 2.042-.07.724-.046 1.48.07 2.225.116.744.325 1.477.62 2.17.295.692.676 1.34 1.14 1.91.462.57 1.006 1.06 1.626 1.43.62.37 1.312.62 2.065.72.153.02.306.03.46.035a4.97 4.97 0 001.465-.2c.56-.17 1.076-.44 1.526-.8.45-.36.832-.81 1.126-1.34.293-.53.494-1.128.594-1.77.1-.643.098-1.33-.01-2.024-.107-.694-.318-1.382-.63-2.03-.312-.646-.726-1.244-1.234-1.76-.508-.516-1.108-.945-1.79-1.255A5.1 5.1 0 0012.504 0zm-.278 1.152c.564.043 1.118.242 1.612.568.493.325.926.777 1.27 1.326.342.55.592 1.193.73 1.882.137.69.16 1.427.06 2.14-.1.714-.32 1.402-.65 2.01-.33.607-.77 1.132-1.296 1.53-.527.396-1.14.662-1.8.763-.66.1-1.37.03-2.062-.205-.693-.235-1.362-.64-1.948-1.185-.585-.544-1.082-1.229-1.447-2.006-.365-.777-.596-1.645-.663-2.542-.066-.897.035-1.822.3-2.714.139-.467.326-.915.558-1.329.233-.413.512-.79.836-1.112.323-.322.69-.586 1.095-.78.405-.194.847-.318 1.317-.355.03-.003.058-.003.088-.003v.012z" />
        </svg>
    )
}

function PythonIcon() {
    return (
        <svg viewBox="0 0 24 24" className="w-8 h-8" fill="currentColor">
            <path d="M14.25.18l.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.35.12-.33.2-.32.28-.3.35-.28.43-.25.5-.22.56-.18.63-.14.67-.1.72-.06.75-.02h.02zm-1.33 13.16h-.1l-.14.04-.17.08-.19.12-.21.17-.21.22-.2.28-.19.33-.17.39-.13.44-.1.5-.07.54-.03.59.01.63.05.66.09.7.13.72.17.74.21.75.25.76.28.76.32.76.35.74.39.72.42.69.46.64.49.59.52.53.55.46.58.38.6.3.63.2.65.11.67.01.67-.11.66-.21.63-.32.6-.42.56-.52.51-.62.46-.71.4-.79.34-.86.27-.92.2-.97.13-1.01.05-1.04-.04-1.06-.12-1.06-.2-1.05-.27-1.02-.34-.97-.39-.91-.45-.83-.49-.74-.53-.63-.56-.52-.58-.4-.6-.27-.61-.14z" />
        </svg>
    )
}

function BashIcon() {
    return (
        <svg viewBox="0 0 24 24" className="w-8 h-8" fill="currentColor">
            <path d="M4 20q-.825 0-1.413-.588T2 18V6q0-.825.588-1.413T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.588 1.413T20 20H4zm0-2h16V8H4v10zm4-2h4v-1.5H8V16zm-2.5-3l3-3-3-3-.7.7L7.1 10l-2.3 2.3.7.7z" />
        </svg>
    )
}

function AWSIcon() {
    return (
        <svg viewBox="0 0 24 24" className="w-8 h-8" fill="currentColor">
            <path d="M6.763 10.036a4.58 4.58 0 00-.296 1.558c0 .755.223 1.297.667 1.672.444.376 1.04.553 1.77.553.28 0 .574-.029.883-.088a3.71 3.71 0 00.924-.297v-1.738c-.197.13-.42.236-.669.318a2.3 2.3 0 01-.737.123c-.359 0-.635-.1-.828-.3-.194-.199-.29-.495-.29-.886 0-.424.109-.777.328-1.058.218-.281.508-.422.87-.422.242 0 .476.045.703.136.227.09.428.213.604.367v-1.68a3.814 3.814 0 00-.788-.232 4.65 4.65 0 00-.804-.07c-.855 0-1.547.26-2.076.782-.528.523-.793 1.2-.793 2.033l.532-.471zm7.205-2.55L12 13.036l-1.968-5.55H7.96l2.91 7.527h2.26l2.91-7.527h-2.072zm4.74 5.876c-.414 0-.746-.138-.996-.414-.25-.276-.375-.644-.375-1.105 0-.461.124-.832.373-1.114.25-.281.584-.422 1.004-.422.42 0 .752.14 1 .42.246.28.37.653.37 1.116 0 .462-.124.832-.37 1.114-.248.281-.582.421-1.003.421l-.003-.016zm-.01-5.13c-.914 0-1.639.305-2.174.914-.536.61-.803 1.41-.803 2.403 0 .994.271 1.787.813 2.383.541.596 1.27.893 2.186.893.904 0 1.624-.3 2.16-.898.536-.599.803-1.392.803-2.38 0-.998-.27-1.8-.81-2.404-.54-.604-1.264-.907-2.175-.907v-.004z" />
        </svg>
    )
}

function GitIcon() {
    return (
        <svg viewBox="0 0 24 24" className="w-8 h-8" fill="currentColor">
            <path d="M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.66 2.66c.645-.222 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.72.719-1.885.719-2.604 0-.545-.545-.676-1.342-.4-2.01l-2.48-2.48v6.53c.175.087.34.202.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.217-.091-.424-.222-.6-.401-.544-.544-.676-1.343-.4-2.011L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477c.604.604 1.582.604 2.186 0l10.43-10.43c.605-.603.605-1.582 0-2.187" />
        </svg>
    )
}

function BurpIcon() {
    return (
        <svg viewBox="0 0 24 24" className="w-8 h-8" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2V7zm0 8h2v2h-2v-2z" />
        </svg>
    )
}

function WiresharkIcon() {
    return (
        <svg viewBox="0 0 24 24" className="w-8 h-8" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
        </svg>
    )
}

function MetasploitIcon() {
    return (
        <svg viewBox="0 0 24 24" className="w-8 h-8" fill="currentColor">
            <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z" />
        </svg>
    )
}
